<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ShopMapper">

    <select id="getCategories" resultType="Map">
        SELECT CATEGORY_NAME FROM CATEGORIES
    </select>

    <select id="getPurposes" resultType="Map">
        SELECT PURPOSE_NAME FROM PURPOSES
    </select>

    <select id="getWholeProduct" resultType="Map">
        SELECT PRODUCTS.PRODUCT_UID, PRODUCT_NAME, PRICE, DISCOUNT_RATE, STOCK, EXPOSURE, DIRECTORY_NAME FROM PRODUCTS
        INNER JOIN PRODUCT_IMGS ON PRODUCTS.PRODUCT_UID = PRODUCT_IMGS.PRODUCT_UID
        WHERE PHYSICAL_FILE_NAME = 'thumbnail-1.jpg';
    </select>

    <select id="getSaleProduct" resultType="Map">
        SELECT PRODUCTS.PRODUCT_UID, PRODUCT_NAME, PRICE, DISCOUNT_RATE, STOCK, EXPOSURE, DIRECTORY_NAME FROM PRODUCTS
        INNER JOIN PRODUCT_IMGS ON PRODUCTS.PRODUCT_UID = PRODUCT_IMGS.PRODUCT_UID
        WHERE PHYSICAL_FILE_NAME = 'thumbnail-1.jpg' AND DISCOUNT_RATE > 0;
    </select>

    <select id="getProductByCategory" parameterType="java.lang.String" resultType="Map">
        SELECT PRODUCTS.PRODUCT_UID, PRODUCT_NAME, PRICE, DISCOUNT_RATE, STOCK, EXPOSURE, DIRECTORY_NAME FROM PRODUCTS
        INNER JOIN PRODUCT_IMGS ON PRODUCTS.PRODUCT_UID = PRODUCT_IMGS.PRODUCT_UID
        INNER JOIN CATEGORIES ON PRODUCTS.CATEGORY_UID = CATEGORIES.CATEGORY_UID
        WHERE PHYSICAL_FILE_NAME = 'thumbnail-1.jpg' AND CATEGORY_NAME = #{category};
    </select>

    <select id="getProductByPurpose" parameterType="java.lang.String" resultType="Map">
        SELECT PRODUCTS.PRODUCT_UID, PRODUCT_NAME, PRICE, DISCOUNT_RATE, STOCK, EXPOSURE, DIRECTORY_NAME FROM PRODUCTS
        INNER JOIN PRODUCT_IMGS ON PRODUCTS.PRODUCT_UID = PRODUCT_IMGS.PRODUCT_UID
        INNER JOIN PURPOSES ON PRODUCTS.PURPOSE_UID = PURPOSES.PURPOSE_UID
        WHERE PHYSICAL_FILE_NAME = 'thumbnail-1.jpg' AND PURPOSE_NAME = #{category};
    </select>

</mapper>